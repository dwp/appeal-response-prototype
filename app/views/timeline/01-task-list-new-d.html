
{% extends "dwp-layout.html" %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% import "includes/templates/header/macro.html" as header%}

{% block head %}
  {% include "includes/head.html" %}
  <link href="/public/stylesheets/custom.css" media="all" rel="stylesheet" type="text/css" />
{% endblock %}

{% block pageTitle %}
  Tasks to complete â€“ Prepare an appeal response
{% endblock %}

{% block header %}
{{header.header(serviceName,'Jane Doe')}}
{% endblock %}

{% block beforeContent %}


{% from "horizontal-navigation/macro.njk" import dwpHorizontalNavigation %}

{{ 
  dwpHorizontalNavigation({
    selectedItem: "#/timeline/01-task-list-new-d",
        items: [
            {
              text: "Case history",
              href: "/timeline/case-details",
              id: "l-item-1"
            },
            {
              href: "#/timeline/01-task-list-new-d",
              text: "Complete response",
              id: "l-item-2"
            }
        ]
    })
}}
  {% endblock %}

{% block content %}


{% from "horizontal-navigation/macro.njk" import dwpHorizontalNavigation %}


  

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h1 class="govuk-heading-l">
          Complete the appeal response
        </h1>
        <ol class="app-task-list">
       
              
             <!-- <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  <a href="representative" class="govuk-link govuk-link--no-visited-state" aria-describedby="read-declaration-status">
                    Add representative details
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="taskRepDetails">Not started</strong>
              </li> -->
              
            </ul> 
          </li> 



          <li>
            <h2 class="app-task-list__section">
              <span class="app-task-list__section-number"> </span> The appeal
            </h2>
            <ul class="app-task-list__items">
           

              <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  <a href="/timeline/appealDates" aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                    Appeal dates 
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="appealdate">
                  {% if data.dateReceivedByHMCTSDate and data.dateReceivedByHMCTSMonth and data.dateReceivedByHMCTSYear %}
                    Completed
                  {% else %}
                    Not started
                  {% endif %}
                </strong>
              </li> 
              <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  <a href="/timeline/activities-considered" aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                    Record activities disputed in the appeal
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="points">Not started</strong>
              </li>                
            </ul>

           <li>
            <h2 class="app-task-list__section">
              <span class="app-task-list__section-number"> </span> The response
            </h2>
            <ul class="app-task-list__items">              
              <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  {% if data.addedAllEvidence[0] === 'yes' %}
                    <a href="./section52V2b/evidences" aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                      Record evidence for activities
                    </a>
                  {% else %}
                    <a href="./section52V2b/record-evidence" aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                      Record evidence for activities
                    </a>
                  {% endif %}
                </span>                
                
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="points">
                  {% if data.recordEvidence === 'no' or data.addedAllEvidence[0] === 'yes' %}
                    Completed
                  {% else %}
                    Not started
                  {% endif %}
                </strong>                
              </li>
              <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  <a href="" aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                    Respond to the PIP health assessment
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="reasons">Not started</strong>
              </li>
              <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  <a href="./Otherissues/other-reasons-for-appeal" aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                    Respond to other reasons for the appeal
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="reasons">Not started</strong>
              </li>


             
                  
                  <li class="app-task-list__item">
                    <span class="app-task-list__task-name">
                      
                      <!--because I'm not saving data we can do it in the HTML,LCW value on decision type page -->
                      <a 
                      {% if data.decisionType == 'LCW' %}
                        href="./treated-asV2/know-when-last-worked"
                      {% else %}
                        href="./treated-asV2/type-of-work"
                      {% endif %}
                      aria-describedby="company-information-status" class="govuk-link govuk-link--no-visited-state" >
                      Record evidence for 'treated as' provisions
                      </a>
                    </span>
                    <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="reasons">Not started</strong>
                  </li>
    
                </ul> 
                <li>

              
              
            </ul>

           


          <li>
            <h2 class="app-task-list__section">
              <span class="app-task-list__section-number"> </span> Create response
            </h2>
            <ul class="app-task-list__items">
              <li class="app-task-list__item">
                <span class="app-task-list__task-name">
                  <a href="" class="govuk-link govuk-link--no-visited-state" aria-describedby="company-information-status" id="cya-link"> 
                    Check answers and create response
                  </a>
                </span>
                <strong class="govuk-tag govuk-tag--blue app-task-list__tag" id="cya-no-link-status">Cannot start yet</strong>

              </li>
            </ul>
          </li>
        </ol>
        <!--
          <div class="govuk-inset-text">
            You can edit the repsonse after it has been created.
          </div>
          <a href="#" class="govuk-button">Create response</a>
        -->
    </div>

    

    
        
    
       
        </ol>
        </div>
 
      </div>
  </div>


  
{% endblock %}

{% block pageScripts %}
  <script type="text/javascript">
    window.addEventListener('load', (event) => {

      sessionStorage.setItem("draftExists","1");
      sessionStorage.setItem("appellantAddress","72 Guild Street <br>London <br>SE23 6FH");

      if(sessionStorage.getItem("taskProgressAppellantDetails")=="2") {
          document.getElementById("taskAppellantDetails").innerHTML = "Completed";
          document.getElementById("taskAppellantDetails").className = "govuk-tag app-task-list__tag";
        
      }
      
//points
//Flags - 


if(sessionStorage.getItem("taskAppealdates")=="2") {
          document.getElementById("appealdate").innerHTML = "Completed"; //'complete - changed the label name'
          document.getElementById("appealdate").className = "govuk-tag app-task-list__tag"; //pulling in GDS style label- check design system
        
      }

if(sessionStorage.getItem("taskProgressPoints")=="2") {
          document.getElementById("points").innerHTML = "Completed"; //'complete - changed the label name'
          document.getElementById("points").className = "govuk-tag app-task-list__tag"; //pulling in GDS style label- check design system
        
      }

      if(sessionStorage.getItem("taskProgressReasons")=="2") {
          document.getElementById("reasons").innerHTML = "Completed"; //'complete - changed the label name'
          document.getElementById("reasons").className = "govuk-tag app-task-list__tag"; //pulling in GDS style label- check design system
        
      }


     // if(sessionStorage.getItem("taskProgressRepDetails")=="2") {
      //    document.getElementById("taskRepDetails").innerHTML = "Completed";
      //    document.getElementById("taskRepDetails").className = "govuk-tag app-task-list__tag"; 
     // }
      if(sessionStorage.getItem("taskProgressFOC")=="2") {
          document.getElementById("taskFOC").innerHTML = "Completed";
          document.getElementById("taskFOC").className = "govuk-tag app-task-list__tag";
      }
      else if(sessionStorage.getItem("taskProgressFOC")=="1") {
          document.getElementById("taskFOC").innerHTML = "In progress";
          document.getElementById("taskFOC").className = "govuk-tag govuk-tag--blue app-task-list__tag";
      }

      if(sessionStorage.getItem("taskProgressRisk")=="2") {
          document.getElementById("taskRisk").innerHTML = "Completed";
          document.getElementById("taskRisk").className = "govuk-tag app-task-list__tag"; 
      }

      

     
      // when adding stuff to task list, add here... :) 

      //if(sessionStorage.getItem("taskProgressPoints")=="2" && sessionStorage.getItem("taskProgressAppellantDetails")=="2" && sessionStorage.getItem("taskProgressRepDetails")=="2" && sessionStorage.getItem("taskProgressFOC")=="2" ) 
      
      if(sessionStorage.getItem("taskProgressReasons")=="2"  ) 
      { 
        document.getElementById("cya-link").style.display="block"; 
        document.getElementById("cya-nolink").style.display="none"; 
        document.getElementById("cya-no-link-status").style.display= "none";
        console.log("everything is complete");
      }
      else {
        document.getElementById("cya-link").style.display="none"; 
        document.getElementById("cya-nolink").style.display="block"; 
        document.getElementById("cya-no-link-status").style.display= "block";
        console.log("NOT everything is complete");
      }
      

    });
  </script>
{% endblock %}